<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workout Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .glass-strong {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.15);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        
        .stat-card {
            transition: transform 0.2s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-2px);
        }
        
        .workout-btn {
            transition: all 0.3s ease;
        }
        
        .workout-btn:hover {
            transform: scale(1.02);
        }
        
        .workout-btn:active {
            transform: scale(0.98);
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-indigo-950 via-purple-900 to-slate-900 p-2 sm:p-6">
    <div id="app"></div>

    <script>
        let state = {
            workouts: [],
            currentWorkout: null,
            activeExercises: [],
            showLogger: false,
            selectedDate: new Date().toISOString().split('T')[0],
            workoutNotes: ''
        };

        function loadWorkouts() {
            const saved = localStorage.getItem('workouts');
            if (saved) {
                state.workouts = JSON.parse(saved);
            }
        }

        function saveWorkouts() {
            localStorage.setItem('workouts', JSON.stringify(state.workouts));
        }

        const workoutTemplates = {
            A: {
                name: 'Workout A - Machine + Dumbbell',
                emoji: 'üí™',
                color: 'from-purple-500 to-pink-500',
                exercises: [
                    { name: 'Dumbbell Goblet Squat', sets: 3, reps: '10-12', type: 'main' },
                    { name: 'Lat Pulldown', sets: 3, reps: '10-12', type: 'main' },
                    { name: 'Dumbbell Chest Press', sets: 3, reps: '10-12', type: 'main' },
                    { name: 'Seated Cable Row', sets: 3, reps: '10-12', type: 'main' },
                    { name: 'Dumbbell RDLs', sets: 3, reps: '10-12', type: 'main' },
                    { name: 'Plank', sets: 3, reps: '30 sec', type: 'core' },
                    { name: 'Deadbugs/Knee Raises', sets: 3, reps: '10', type: 'core' }
                ]
            },
            B: {
                name: 'Workout B - Bodyweight + Machines',
                emoji: 'üèãÔ∏è',
                color: 'from-blue-500 to-cyan-500',
                exercises: [
                    { name: 'Smith Machine Squats', sets: 3, reps: '8-10', type: 'main' },
                    { name: 'Machine Chest Press', sets: 3, reps: '10', type: 'main' },
                    { name: 'Assisted Pull-Up/Lat Pulldown', sets: 3, reps: '10-12', type: 'main' },
                    { name: 'Leg Curl Machine', sets: 3, reps: '10-12', type: 'main' },
                    { name: 'Farmer Carries', sets: 2, reps: '30 sec', type: 'main' },
                    { name: 'Mobility Stretches', sets: 1, reps: '5 min', type: 'mobility' }
                ]
            },
            C: {
                name: 'Workout C - Push/Pull Blend',
                emoji: 'üî•',
                color: 'from-orange-500 to-red-500',
                exercises: [
                    { name: 'Leg Press Machine', sets: 3, reps: '10-12', type: 'main' },
                    { name: 'Cable Face Pulls', sets: 3, reps: '12-15', type: 'main' },
                    { name: 'Dumbbell Shoulder Press', sets: 3, reps: '10', type: 'main' },
                    { name: 'Cable Rope Triceps Extensions', sets: 3, reps: '12', type: 'main' },
                    { name: 'Dumbbell Bicep Curls', sets: 3, reps: '12', type: 'main' },
                    { name: 'Core Work', sets: 3, reps: '10-20', type: 'core' }
                ]
            },
            Mobility: {
                name: 'Mobility Only',
                emoji: 'üßò',
                color: 'from-green-500 to-teal-500',
                exercises: [
                    { name: 'Full Body Mobility', sets: 1, reps: '10 min', type: 'mobility' }
                ]
            }
        };

        function startWorkout(type) {
            const template = workoutTemplates[type];
            state.activeExercises = template.exercises.map(ex => ({
                ...ex,
                completedSets: Array(ex.sets).fill(null).map(() => ({ weight: '', reps: '', completed: false }))
            }));
            state.currentWorkout = { type, name: template.name, date: state.selectedDate };
            state.workoutNotes = '';
            state.showLogger = true;
            render();
        }

        function saveWorkout() {
            const workout = {
                ...state.currentWorkout,
                exercises: state.activeExercises,
                notes: state.workoutNotes,
                completedAt: new Date().toISOString(),
                id: Date.now()
            };
            state.workouts.unshift(workout);
            saveWorkouts();
            state.showLogger = false;
            state.currentWorkout = null;
            state.activeExercises = [];
            state.workoutNotes = '';
            render();
        }

        function cancelWorkout() {
            state.showLogger = false;
            state.currentWorkout = null;
            state.activeExercises = [];
            render();
        }

        function deleteWorkout(id) {
            if (confirm('Delete this workout?')) {
                state.workouts = state.workouts.filter(w => w.id !== id);
                saveWorkouts();
                render();
            }
        }

        function exportCSV() {
            let csv = 'Date,Workout Type,Exercise,Set,Weight,Reps,Completed,Notes\n';
            state.workouts.forEach(workout => {
                workout.exercises.forEach(exercise => {
                    exercise.completedSets.forEach((set, idx) => {
                        csv += `"${workout.date}","${workout.type}","${exercise.name}",${idx + 1},"${set.weight || 'N/A'}","${set.reps || 'N/A'}",${set.completed ? 'Yes' : 'No'},"${workout.notes || ''}"\n`;
                    });
                });
            });
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `workout-data-${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
        }

        function getStats() {
            const weekAgo = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000);
            const weekWorkouts = state.workouts.filter(w => new Date(w.date) >= weekAgo);
            
            let streak = 0;
            if (state.workouts.length > 0) {
                const dates = [...new Set(state.workouts.map(w => w.date))].sort((a, b) => new Date(b) - new Date(a));
                let current = new Date();
                current.setHours(0, 0, 0, 0);
                
                for (let date of dates) {
                    const d = new Date(date);
                    d.setHours(0, 0, 0, 0);
                    const diff = Math.floor((current - d) / (1000 * 60 * 60 * 24));
                    if (diff <= 1) {
                        streak++;
                        current = d;
                    } else break;
                }
            }
            
            return { weekCount: weekWorkouts.length, streak, total: state.workouts.length };
        }

        function updateSet(exIdx, setIdx, field, value) {
            state.activeExercises[exIdx].completedSets[setIdx][field] = value;
        }

        function toggleComplete(exIdx, setIdx) {
            state.activeExercises[exIdx].completedSets[setIdx].completed = !state.activeExercises[exIdx].completedSets[setIdx].completed;
            render();
        }

        function updateExerciseName(idx, name) {
            state.activeExercises[idx].name = name;
        }

        function removeExercise(idx) {
            state.activeExercises.splice(idx, 1);
            render();
        }

        function addExercise() {
            state.activeExercises.push({
                name: 'New Exercise',
                sets: 3,
                reps: '10',
                type: 'main',
                completedSets: Array(3).fill(null).map(() => ({ weight: '', reps: '', completed: false }))
            });
            render();
        }

        function render() {
            const app = document.getElementById('app');
            const stats = getStats();

            if (state.showLogger) {
                app.innerHTML = `
                    <div class="max-w-5xl mx-auto">
                        <div class="glass-strong rounded-2xl p-4 sm:p-6 mb-4 shadow-2xl">
                            <div class="flex justify-between items-start gap-3">
                                <div class="flex-1">
                                    <h2 class="text-xl sm:text-3xl font-bold text-white mb-1">${state.currentWorkout.name}</h2>
                                    <p class="text-sm sm:text-base text-purple-300">${state.currentWorkout.date}</p>
                                </div>
                                <button onclick="cancelWorkout()" class="p-2 sm:p-3 bg-red-500/20 hover:bg-red-500/30 rounded-xl text-red-300 hover:text-red-200 transition-all text-xl sm:text-2xl font-bold">√ó</button>
                            </div>
                        </div>

                        <div class="space-y-3 sm:space-y-4" id="exercises"></div>

                        <button onclick="addExercise()" class="w-full mt-4 glass hover:glass-strong rounded-xl p-4 text-white transition-all text-sm sm:text-base font-medium border-2 border-dashed border-white/20 hover:border-white/40">
                            <span class="text-lg mr-2">+</span> Add Exercise
                        </button>

                        <div class="glass-strong rounded-2xl p-4 sm:p-5 mt-4 shadow-xl">
                            <label class="flex items-center gap-2 text-white font-semibold mb-3 text-sm sm:text-base">
                                <span class="text-xl">üìù</span> Workout Notes
                            </label>
                            <textarea id="notes" class="w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-white text-sm sm:text-base placeholder-white/40 focus:outline-none focus:border-purple-400 focus:ring-2 focus:ring-purple-400/20 min-h-24 transition-all" placeholder="How did you feel? Any PRs or observations?">${state.workoutNotes}</textarea>
                        </div>

                        <button onclick="saveWorkout()" class="w-full mt-5 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-4 rounded-xl text-sm sm:text-lg shadow-2xl transition-all transform hover:scale-[1.02] active:scale-[0.98]">
                            ‚úì Complete Workout
                        </button>
                    </div>
                `;

                const exercisesDiv = document.getElementById('exercises');
                exercisesDiv.innerHTML = state.activeExercises.map((ex, exIdx) => `
                    <div class="glass-strong rounded-2xl p-4 sm:p-5 shadow-xl">
                        <div class="flex justify-between items-start gap-2 mb-3">
                            <input type="text" value="${ex.name}" onchange="updateExerciseName(${exIdx}, this.value)" class="flex-1 text-base sm:text-lg font-bold text-white bg-transparent border-b-2 border-transparent hover:border-white/30 focus:border-purple-400 focus:outline-none transition-all py-1">
                            <div class="flex items-center gap-2">
                                <span class="text-xs sm:text-sm bg-purple-500/30 text-purple-200 px-3 py-1.5 rounded-full font-medium border border-purple-400/30">${ex.type}</span>
                                <button onclick="removeExercise(${exIdx})" class="p-2 bg-red-500/20 hover:bg-red-500/30 rounded-lg text-red-300 hover:text-red-200 transition-all">
                                    <span class="text-base">üóëÔ∏è</span>
                                </button>
                            </div>
                        </div>
                        <p class="text-purple-300 text-xs sm:text-sm mb-4 font-medium">Target: ${ex.sets} sets √ó ${ex.reps} reps</p>
                        
                        <div class="space-y-2.5">
                            ${ex.completedSets.map((set, setIdx) => `
                                <div class="flex gap-2 items-center">
                                    <span class="text-white text-xs sm:text-sm font-bold w-14 text-center bg-white/5 py-2 rounded-lg">Set ${setIdx + 1}</span>
                                    ${ex.type !== 'mobility' ? `
                                        <input type="number" placeholder="lbs" value="${set.weight}" onchange="updateSet(${exIdx}, ${setIdx}, 'weight', this.value)" class="flex-1 bg-white/5 border border-white/10 rounded-lg px-3 py-2.5 text-white text-sm font-medium placeholder-white/30 focus:outline-none focus:border-purple-400 focus:ring-2 focus:ring-purple-400/20 transition-all">
                                        <input type="number" placeholder="reps" value="${set.reps}" onchange="updateSet(${exIdx}, ${setIdx}, 'reps', this.value)" class="flex-1 bg-white/5 border border-white/10 rounded-lg px-3 py-2.5 text-white text-sm font-medium placeholder-white/30 focus:outline-none focus:border-purple-400 focus:ring-2 focus:ring-purple-400/20 transition-all">
                                    ` : '<span class="flex-1 text-purple-300 text-sm font-medium">Completed stretch/hold</span>'}
                                    <button onclick="toggleComplete(${exIdx}, ${setIdx})" class="px-4 py-2.5 rounded-lg text-sm font-bold transition-all ${set.completed ? 'bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-lg' : 'bg-white/10 text-white/60 hover:bg-white/20'}">
                                        ${set.completed ? '‚úì' : '‚óã'}
                                    </button>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `).join('');
                
                document.getElementById('notes').addEventListener('input', (e) => {
                    state.workoutNotes = e.target.value;
                });

            } else {
                app.innerHTML = `
                    <div class="max-w-7xl mx-auto">
                        <div class="text-center mb-8 sm:mb-12">
                            <h1 class="text-4xl sm:text-6xl font-black text-white mb-3 tracking-tight">
                                üí™ Workout Tracker
                            </h1>
                            <p class="text-sm sm:text-lg text-purple-300 font-medium">Strength + Mobility Training</p>
                        </div>

                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-5 mb-8">
                            <div class="stat-card glass-strong rounded-2xl p-5 sm:p-6 shadow-xl">
                                <div class="flex items-center gap-3 mb-3">
                                    <span class="text-2xl sm:text-3xl">üìÖ</span>
                                    <h3 class="text-white font-bold text-sm sm:text-base">This Week</h3>
                                </div>
                                <p class="text-3xl sm:text-4xl font-black text-white mb-1">${stats.weekCount}</p>
                                <p class="text-purple-300 text-xs sm:text-sm font-medium">Goal: 3-5 per week</p>
                            </div>

                            <div class="stat-card glass-strong rounded-2xl p-5 sm:p-6 shadow-xl">
                                <div class="flex items-center gap-3 mb-3">
                                    <span class="text-2xl sm:text-3xl">üî•</span>
                                    <h3 class="text-white font-bold text-sm sm:text-base">Streak</h3>
                                </div>
                                <p class="text-3xl sm:text-4xl font-black text-white mb-1">${stats.streak}</p>
                                <p class="text-orange-300 text-xs sm:text-sm font-medium">days in a row</p>
                            </div>

                            <div class="stat-card glass-strong rounded-2xl p-5 sm:p-6 shadow-xl">
                                <div class="flex items-center gap-3 mb-3">
                                    <span class="text-2xl sm:text-3xl">üèÜ</span>
                                    <h3 class="text-white font-bold text-sm sm:text-base">Total</h3>
                                </div>
                                <p class="text-3xl sm:text-4xl font-black text-white mb-1">${stats.total}</p>
                                <p class="text-green-300 text-xs sm:text-sm font-medium">workouts logged</p>
                            </div>
                        </div>

                        <div class="glass-strong rounded-2xl p-5 sm:p-7 mb-6 shadow-2xl">
                            <h2 class="text-2xl sm:text-3xl font-black text-white mb-5 flex items-center gap-3">
                                <span class="text-3xl">‚ûï</span> Start New Workout
                            </h2>
                            <input type="date" value="${state.selectedDate}" onchange="state.selectedDate = this.value" class="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white mb-5 text-sm sm:text-base font-medium focus:outline-none focus:border-purple-400 focus:ring-2 focus:ring-purple-400/20 transition-all">
                            <div class="grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4">
                                ${Object.keys(workoutTemplates).map(key => `
                                    <button onclick="startWorkout('${key}')" class="workout-btn glass hover:glass-strong rounded-2xl p-5 sm:p-6 text-left shadow-lg border border-white/10 hover:border-white/30 transition-all">
                                        <div class="text-3xl sm:text-4xl mb-3">${workoutTemplates[key].emoji}</div>
                                        <h3 class="text-base sm:text-lg font-bold text-white mb-2">Workout ${key}</h3>
                                        <p class="text-purple-300 text-xs sm:text-sm font-medium">${workoutTemplates[key].exercises.length} exercises</p>
                                    </button>
                                `).join('')}
                            </div>
                        </div>

                        ${state.workouts.length > 0 ? `
                            <div class="flex justify-end mb-5">
                                <button onclick="exportCSV()" class="glass-strong hover:bg-white/20 text-white font-bold px-5 py-3 rounded-xl text-sm sm:text-base transition-all flex items-center gap-2 shadow-lg">
                                    <span class="text-lg">üì•</span> Export CSV
                                </button>
                            </div>
                        ` : ''}

                        <div class="glass-strong rounded-2xl p-5 sm:p-7 shadow-2xl">
                            <h2 class="text-2xl sm:text-3xl font-black text-white mb-5">Recent Workouts</h2>
                            ${state.workouts.length === 0 ? 
                                '<p class="text-purple-300 text-center py-12 text-sm sm:text-base font-medium">No workouts yet. Start your first one above! üí™</p>' 
                                : `
                                <div class="space-y-3">
                                    ${state.workouts.slice(0, 10).map(w => `
                                        <div class="glass rounded-xl p-4 sm:p-5 flex justify-between items-center hover:glass-strong transition-all">
                                            <div class="flex-1 min-w-0">
                                                <h3 class="text-white font-bold text-sm sm:text-base truncate">${w.name}</h3>
                                                <p class="text-purple-300 text-xs sm:text-sm font-medium mt-1">${w.date} ‚Ä¢ ${w.exercises.length} exercises</p>
                                            </div>
                                            <button onclick="deleteWorkout(${w.id})" class="p-2.5 bg-red-500/20 hover:bg-red-500/30 rounded-lg text-red-300 hover:text-red-200 transition-all ml-3">
                                                <span class="text-base sm:text-lg">üóëÔ∏è</span>
                                            </button>
                                        </div>
                                    `).join('')}
                                </div>
                            `}
                        </div>
                    </div>
                `;
            }
        }

        loadWorkouts();
        render();
    </script>
</body>
</html>